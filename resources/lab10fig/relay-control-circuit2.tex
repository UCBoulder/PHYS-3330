% Process for creating PNG:
% 1 - Compile this document
% 2 - Download PDF
% 3 - Upload to https://cloudconvert.com/pdf-to-png
% 4 - Set Pixel Density to 600
% 5 - Download PNG file and upload to Overleaf

\documentclass[border=0.2cm]{standalone}
\usepackage{circuitikz}
\usepackage{amsmath}



\standaloneenv{circuitikz}
\begin{document}


\begin{circuitikz}[american voltages]
\ctikzset{bipoles/diode/height=.3, bipoles/diode/width=.3,}
    
    \draw (0,0) node[npn](optonpn) {} coordinate(zero)
    
    (optonpn.emitter) to ++(1,0) to [R,l=$R_b$] ++(1.5,0) to ++(1,0) ++(0.5,0) node[npn](npn1) {2N9304}

    (npn1.emitter) ++(0,0) node[ground]{}

    (npn1.emitter) ++(0,-1) node {Earth ground for the circuit}

    (optonpn.collector) to ++(1,0) to ++(0,5.75) to [short,-*] ++(3,0);
    
    \fill[white] (zero) ++(-1,-0.25) rectangle ++(.566, .5);

    \draw (zero) ++(-3, .75) node[anchor=east] {Arduino GPIO} to [short,-o] ++(0,0) to ++(2,0) to [empty led]  ++(0,-1.5) to ++(-0.75,0) to [R,l_=$R_{cl}$] ++(-2.5,0) to ++(0,0) node[sground]{}
    ;
    \draw (zero) ++(-3.5, -1.75) node {Arduino common ground};

    \draw[thick] (zero) ++(-1.5, 1) node {} to ++(1.8,0) to ++(0,-2) to ++(-1.8,0) to ++(0,2);

    \draw (zero) ++(-.55,1.25) node {optocoupler};



    \draw (npn1.collector) to [short,-*] ++(0,0.5) coordinate(bot-node) to ++(0,.5) to [R,l_=$R_L$] ++(0,1.5) to [L,l_=$L$] ++(0,1.5) to [short,-*] ++(0,.5) to ++(0,0.5) to [R,l_=$R_1$] ++(0,1.5) to ++(0,0.5) node[anchor=south]{15 V} to [short,-o] ++(0,0)

    (bot-node) to ++(-1.5,0) to [D] ++(0,4) to ++(1.5,0);

    \draw (bot-node)[thick] ++(-.5,.25) to ++(0,3.5) to ++(3,0) to ++(0,-3.5) coordinate(corner) to ++(-3,0)
    ;

    \draw (corner) ++(0.5,0.5) to [short,-o] ++(0,0) node[anchor=west]{normally closed} to ++(-1.75,0) to [short,-*] ++(0,0.5)
    
    (corner) ++(0.5,3) to [short,-o] ++(0,0) node[anchor=west]{normally open} to ++(-1.75,0) to [short,-o] ++(0,-0.5)
    
    (corner) ++(0.5,1.75) to [short,-o] ++(0,0) node[anchor=west]{} to [short,-*] ++(-1,0) to ++(-0.75,-0.65);

    
    
    
\end{circuitikz}



\end{document}


 